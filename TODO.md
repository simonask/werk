# TODO

- [ ] Consider using pattern syntax for glob patterns instead of standard glob
  syntax.
- [ ] Autoclean: Match files in the output directory against available recipes
  and delete them if they are older than `.werk-cache`.

## Done

- [x] Autowatcher: Run a recipe and detect which files where checked for
  outdatedness, and then watch those files and rebuild when any of them changes.
- [x] Don't use `RUST_LOG` to enable logging, as it interferes with child
  processes. ~~Use `WERK_LOG` instead.~~
- [x] Support generating depfiles in the same command that compiles the file.
  The logic should be, if the target has a `depfile` field: Only read the
  depfile if the target already exists and isn't outdated anyway due to mtime.
  If the depfile is missing/outdated, the target is outdated. Determine how to
  build the depfile by checking if a recipe can be found that would build it,
  and otherwise assume that the compiler invocation generates the depfile (`-MM
  -MF`). If the depfile was not generated by the compiler invocation, issue a
  warning after building the recipe (not an error). Recipes that have the
  `depfile` field, but never actually generate a depfile (either by an explicit
  recipe or implicitly) will always be outdated.
- [x] Take `werk.toml` modification time into account in outdatedness.
- [x] Take command-line `--define`s into account in outdatedness.
